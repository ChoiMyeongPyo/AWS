# K9s 사용법 및 유용한 팁

## 📚 개요
K9s는 Kubernetes 클러스터를 실시간으로 모니터링하고 관리할 수 있는 터미널 기반 UI 도구입니다. 반복적인 kubectl 명령어 입력을 줄이고, 클러스터 상태를 빠르게 파악하여 운영 효율성을 높입니다.

---

## 🚀 설치 및 실행

### ✅ **설치**
1. 시스템 아키텍처 확인:
   ```bash
   uname -m
   ```
   - `x86_64`: 64비트 Intel/AMD 아키텍처
   - `aarch64`: ARM 64비트 아키텍처

2. 알맞은 바이너리 다운로드 및 설치:
   ```bash
   wget https://github.com/derailed/k9s/releases/download/v<버전>/k9s_Linux_arm64.tar.gz
   tar -zxvf k9s_Linux_arm64.tar.gz
   chmod +x k9s
   mv k9s /usr/local/bin/k9s
   ```

3. 정상 설치 확인:
   ```bash
   k9s version
   ```

### ✅ **실행**
```bash
k9s
```
- 클러스터의 기본 네임스페이스 파드 목록이 표시됩니다.

---

## ⚡ 주요 단축키 및 명령어

### 🎯 **기본 단축키**
| 단축키           | 설명                                    |
|------------------|-----------------------------------------|
| `:`              | 명령어 모드 진입 (`:q`로 종료 가능)      |
| `/`              | 검색 기능 (리소스 이름 필터링)          |
| `Ctrl + A`       | 모든 네임스페이스 표시                  |
| `g`              | 리소스 그룹 보기 (Pods, Deployments 등) |
| `0-9`            | 리소스 별 북마크로 빠른 이동            |
| `d`              | 선택한 리소스 삭제                     |
| `s`              | 리소스 상세 보기 (설정, 이벤트 등)     |
| `l`              | 로그 보기 (선택한 파드)                |
| `Ctrl + L`       | 실시간 로그 보기                       |
| `Ctrl + F`       | 로그 검색                              |
| `r`              | 파드 재시작                            |
| `e`              | YAML 에디터 열기                       |
| `Shift + S`      | YAML 보기 모드                         |
| `:` + `ctx`      | 클러스터 컨텍스트 전환                 |
| `:` + `ns`       | 네임스페이스 전환                      |
| `q`              | 현재 화면 종료                         |
| `Esc`            | 한 단계 뒤로 이동                      |
| `Ctrl + C`       | K9s 종료                               |

### 🔄 **리소스 탐색 명령어**
| 명령어                | 설명                      |
|-----------------------|--------------------------|
| `:pods` (`:po`)       | 파드 목록 보기           |
| `:deploy` (`:dp`)     | 디플로이먼트 보기        |
| `:svc`                | 서비스 목록 보기         |
| `:ing`                | 인그레스 보기            |
| `:node` (`:no`)       | 노드 목록 보기           |
| `:configmap` (`:cm`)  | ConfigMap 보기           |
| `:secret` (`:sec`)    | 시크릿 보기              |
| `:job`                | 잡(Job) 보기             |
| `:cronjob`            | 크론잡(CronJob) 보기     |
| `:hpa`                | HorizontalPodAutoscaler  |
| `:pvc`                | 퍼시스턴트 볼륨 클레임   |
| `:crd`                | Custom Resource Definitions 보기 |

---

## 🔍 실시간 로그 모니터링
1. **파드 선택 후 `l` 키 입력**: 실시간 로그 확인
2. **로그 검색**: `Ctrl + F` 입력 후 검색어 입력
3. **실시간 업데이트 보기**: `Ctrl + L`

---

## 🌐 네임스페이스 및 클러스터 전환

### ✅ **네임스페이스 전환**
```bash
:ns
```
목록에서 원하는 네임스페이스 선택

### ✅ **클러스터 컨텍스트 전환**
```bash
:ctx
```
컨텍스트 목록에서 전환할 클러스터 선택

---

## 🛠 고급 기능

### 📜 **특정 리소스만 표시하기**
```bash
k9s -A                  # 모든 네임스페이스의 리소스 보기
k9s -n <namespace>      # 특정 네임스페이스로 시작
k9s -c pod              # 특정 리소스(pod)만 표시
```

### 📝 **즉석 YAML 편집 및 적용**
- 리소스 선택 후 `e` 키로 YAML 열기 및 실시간 수정

### 🏃 **파드 내부 쉘 진입**
- 파드 선택 후 `s` 키: `kubectl exec`와 동일한 쉘 실행

### 🐞 **문제 있는 파드 디버깅**
- CrashLoopBackOff 상태의 파드를 재시작 (`r` 키)
- 이벤트 로그를 통해 문제 식별 (`s` -> Events)

---

## 🌟 유용한 팁

### 💡 **1. 북마크 기능**
- 자주 사용하는 리소스를 숫자(`0-9`)에 매핑하여 빠르게 이동할 수 있습니다.

### 💡 **2. 실시간 이벤트 모니터링**
- `:events` 명령어로 클러스터 내 발생하는 이벤트 실시간 확인

### 💡 **3. 다중 클러스터 환경에서 효율적 관리**
- `:ctx` 명령어를 통해 즉시 클러스터 간 전환 가능

### 💡 **4. 테마 및 환경 설정**
- 설정 파일(`~/.k9s/config.yml`)을 편집하여 UI 색상, 기본 네임스페이스, 시작 시 로딩할 리소스 등을 변경할 수 있습니다.

### 💡 **5. Docker를 통한 K9s 실행**
Docker 환경에서도 간단하게 K9s 실행:
```bash
docker run --rm -it -v $HOME/.kube/config:/root/.kube/config quay.io/derailed/k9s
```

---

## ⚡ 문제 해결

### ❓ **접속 오류 발생 시**
- 현재 컨텍스트 확인:
  ```bash
  kubectl config get-contexts
  ```
- 클러스터 연결 상태 확인:
  ```bash
  kubectl get pods
  ```

### 🔄 **로그 확인 및 디버깅**
- `:logs` 명령어로 특정 파드의 로그를 즉시 확인

### 🛡 **권한 문제 해결**
- 실행 권한 부여:
  ```bash
  chmod +x /usr/local/bin/k9s
  ```

---

## 🎬 **마무리 팁**
- K9s는 `kubectl` 명령어보다 빠르고 직관적인 Kubernetes 리소스 탐색을 제공합니다.
- 실시간 데이터 제공으로 장애 발생 시 즉각적인 문제 해결에 최적화되어 있습니다.
- 클러스터 상태를 신속하게 파악하고 운영 환경을 효율적으로 관리하세요.

---

✨ **K9s를 사용하여 Kubernetes 운영을 한 단계 더 업그레이드하세요!** 🚀

